/**
 * Plugin to add a small bar at the bottom of the site with a link to the Cookie policy
 * The bar is only visible if the cookie is not set or set to false
 * The bar will retract after 30 seconds
 * Once the bar has retracted an agreement cookie is set to true and the bar will not show again
 *
 * This plugin reqires jQuery 1.4 or higher
 * 
 * By David Slack for Smiling Wolf 29 May 2012
 *
 * To use simply add to the body like $('body').newLaw();
 * Options include
 * 'location' which is where the bar is located 'top' or 'bottom'
 * 'policyLink' which is the link to the cookie law policy eg '/content/privacy#cookie'
 */
 
(function(a){a.fn.newLaw=function(b){function c(){var a="newLaw_cookie";var b="true";var c=396;var d=new Date;d.setDate(d.getDate()+c);var e=escape(b)+(c==null?"":"; expires="+d.toUTCString());document.cookie=a+"="+e}function d(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++){c=e[b].substr(0,e[b].indexOf("="));d=e[b].substr(e[b].indexOf("=")+1);c=c.replace(/^\s+|\s+$/g,"");if(c==a){return unescape(d)}}}function e(){a(".newLaw_bar").fadeIn("slow")}function f(){a(".newLaw_bar").fadeOut("slow")}var g={location:"bottom",policyLink:"/content/privacy#cookie",timer:true,timerMiliseconds:2e3};var b=a.extend(g,b);var h=a('<div class="newLaw_bar">').html('By using this website you agree to our <a href="'+b.policyLink+'" title="See more information on our cookie policy">cookie policy</a>').append('<a class="accept" href="#">Close</a>');newLaw_getCookieValue=d("newLaw_cookie");if(newLaw_getCookieValue!="true"){return this.each(function(){a(this).append(h);if(b.location=="bottom"){a(".newLaw_bar").css("bottom",0)}else{a(".newLaw_bar").css("top",0)}e();a(".newLaw_bar a.accept").click(function(){f();c();return false});if(b.timer==true){setTimeout("$('.newLaw_bar a.accept').click();",b.timerMiliseconds)}})}}})(jQuery)